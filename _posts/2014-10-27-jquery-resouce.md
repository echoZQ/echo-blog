---
layout: post
title: jQuery源码阅读
category: 阅读
tags: Jquery
description: 师傅一直在强调源码阅读的重要性，进阶之路很长
---


## Sizzle
Sizzle是一个css选择权引擎，提供的接口跟document.querySelectorAll是一样的，其输入是一串选择器字符串，输出则是一个符合这个选择器规则的DOM节点列表。

### 排版引擎解析CSS选择器时为何要从右往左解析
1. 如果正向解析，例如\「div div p em\」，我们首先就要检查当前元素到 html 的整条路径，找到最上层的 div，再往下找，如果遇到不匹配就必须回到最上层那个 div，往下再去匹配选择器中的第一个 div，回溯若干次才能确定匹配与否，效率很低。
2. 逆向匹配则不同，如果当前的 DOM 元素是 div，而不是 selector 最后的 em，那只要一步就能排除。只有在匹配时，才会不断向上找父节点进行验证。
3. 因为匹配的情况远远低于不匹配的情况，所以逆向匹配带来的优势是巨大的。同时我们也能够看出，在选择器结尾加上「*」就大大降低了这种优势，这也就是很多优化原则提到的尽量避免在选择器末尾添加通配符的原因。
4. 简单的来说**浏览器从右到左进行查找的好处是为了尽早过滤掉一些无关的样式规则和元素**